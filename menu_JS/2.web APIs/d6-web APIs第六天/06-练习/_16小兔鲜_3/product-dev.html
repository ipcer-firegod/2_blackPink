<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>小兔鲜儿 - 新鲜 惠民 快捷!</title>
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="./iconfont/iconfont.css">
  <!-- <link rel="stylesheet" href="//at.alicdn.com/t/font_1939705_bgtmkonu28.css"> -->
  <link rel="stylesheet" href="./fonts/iconfont.css">

  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/index.css">
  <link rel="stylesheet" href="./css/product.css">
  <link rel="stylesheet" href="./css/comment.css">

</head>

<body>
  <!-- 返回顶部 -->
  <div class="backTop">
    <a href="#"><i class="backIcon"></i>
      <p>顶部</p>
    </a>
  </div>

  <!-- 1.网页头部 -->
  <div class="shortcut">
    <div class="w">
      <ul>
        <!-- 使用 hash 来区分打开同一页面的不同模块：#login / #register -->
        <li><a href="./loginRegister.html#login">请先登录</a></li>
        <li class="line"></li>
        <li><a href="./loginRegister.html#register">免费注册 </a></li>
        <li class="line"></li>
        <li><a href="#">我的订单</a></li>
        <li class="line"></li>
        <li><a href="#">会员中心</a></li>
        <li class="line"></li>
        <li><a href="#">帮助中心</a></li>
        <li class="line"></li>
        <li><a href="#">在线客服</a></li>
        <li class="line"></li>
        <li><a href="#"><i class="iconfont icon-mobile-phone"></i>手机版</a></li>
      </ul>
    </div>
  </div>
  <header class="w header">
    <div class="logo">
      <h1><a href="index.html" title="小兔鲜儿">小兔鲜儿</a></h1>
    </div>

    <ul class="nav">
      <li><a href="./index.html">首页</a></li>
      <li><a href="#">生鲜</a></li>
      <li><a href="#">美食</a></li>
      <li><a href="#">餐厨</a></li>
      <li><a href="#">电器</a></li>
      <li><a href="#">居家</a></li>
      <li><a href="#">洗护</a></li>
      <li><a href="#">孕婴</a></li>
      <li><a href="#">服装</a></li>
    </ul>

    <div class="search">
      <i class="iconfont icon-search"></i>
      <input type="text" placeholder="搜一搜">
    </div>

    <div class="cart">
      <span>2</span>
      <i class="iconfont icon-cart-full"></i>
    </div>
  </header>

  <!-- 3.网页主体 -->
  <main class="w">
    <!-- 面包屑 -->
    <div class="bread">
      <a href="./index.html"> 首页 > </a>
      <a href="javascript:;"> 电子产品 > </a>
      <a href="javascript:;"> 电视 > </a>
      <span>小米电视4A 32英寸</span>
    </div>
    <!-- 商品信息 -->
    <div class="product-info">
      <div class="left">
        <div class="pictrue">
          <div class="middle">
            <img src="./images/1.jpg" alt="">
            <div class="layer"></div>
          </div>
          <div class="small">
            <ul>
              <li class="active"><img src="./images/1.jpg" alt=""></li>
              <li><img src="./images/2.jpg" alt=""></li>
              <li><img src="./images/3.jpg" alt=""></li>
              <li><img src="./images/4.jpg" alt=""></li>
              <li><img src="./images/5.jpg" alt=""></li>
            </ul>
          </div>
          <div class="large"></div>
        </div>
        <div class="other">
          <ul>
            <li>
              <p>销量人气</p>
              <p>1999+</p>
              <p>销量人气</p>
            </li>
            <li>
              <p>商品评价</p>
              <p>999+</p>
              <p>查看评价</p>
            </li>
            <li>
              <p>收藏人气</p>
              <p>299+</p>
              <p><a href="javascript:;">收藏商品</a></p>
            </li>
            <li>
              <p>品牌信息</p>
              <p>小米</p>
              <p><a href="javascript:;">品牌主页</a></p>
            </li>
          </ul>
        </div>
      </div>
      <div class="right">
        <h3 class="name">小米电视4A 32英寸</h3>
        <p class="desc">全面屏设计 / 高清分辨率 / 海量内容 / 1G+4G大内存 / 多核处理器</p>
        <p class="price"><span class="now">¥1899</span><span class="old">¥2999</span></p>
        <div class="address">
          <div class="item">
            <div class="dt">促销</div>
            <div class="dd">12月好物放送，App领券购买直降120元</div>
          </div>
          <div class="item">
            <div class="dt">配送</div>
            <div class="dd">至
              <div class="box">
                <span>陕西 西安 <i></i></span>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="dt">服务</div>
            <div class="dd">
              <span class="fw">无忧退货</span>
              <span class="fw">快速退款</span>
              <span class="fw">免费包邮</span>
              <a href="#" class="lj">了解详情</a>
            </div>
          </div>
        </div>
        <div class="attrs">
          <div class="item">
            <div class="dt">颜色</div>
            <div class="dd" id="color">
              <img src="./uploads/img/cate-06.png" alt="">
              <img src="./uploads/img/cate-07.png" alt="">
            </div>
          </div>
          <div class="item">
            <div class="dt">颜色</div>
            <div class="dd" id="size">
              <span class="size">22英寸</span>
              <span class="size">42英寸</span>
              <span class="size">52英寸</span>
              <span class="size">62英寸</span>
            </div>
          </div>
          <div class="item">
            <div class="dt">数量</div>
            <div class="dd">
              <div class="num">
                <a href="javascript:;">-</a>
                <input type="text" value="1">
                <a href="javascript:;">+</a>
              </div>
            </div>
          </div>
          <div class="item">
            <a class="buy" href="javascript:;">立即购买</a>
          </div>
        </div>
      </div>
    </div>
    <!-- 同类产品推荐 -->
    <div class="relevant-product">
      <h3>同类产品推荐</h3>
      <ul>
        <li>
          <a href="#">
            <img src="./uploads/history_goods_1.jpg" alt="">
            <p class="name">USB Type C数据线</p>
            <p class="desc">快速充电，稳定传输</p>
            <p class="price">¥39</p>
          </a>
        </li>
        <li>
          <a href="#">
            <img src="./uploads/history_goods_2.jpg" alt="">
            <p class="name">红米Note 5A 高配版</p>
            <p class="desc">1600万像素柔光自拍</p>
            <p class="price">¥1899</p>
          </a>
        </li>
        <li>
          <a href="#">
            <img src="./uploads/history_goods_3.jpg" alt="">
            <p class="name">VGA网口多功能转接器</p>
            <p class="desc">小巧便携，节省桌面空间</p>
            <p class="price">¥19</p>
          </a>
        </li>
        <li>
          <a href="#">
            <img src="./uploads/history_goods_4.jpg" alt="">
            <p class="name">笔记本Pro 15.6"</p>
            <p class="desc">全金属强化机身搭配独显</p>
            <p class="price">¥4899</p>
          </a>
        </li>
      </ul>
      <a href="javascript:;" class="prev"><span class="iconfont icon-angle-left"></span></a>
      <a href="javascript:;" class="next"><span class="iconfont icon-angle-right"></span></a>
    </div>
    <!-- 商品详情 -->
    <div class="product-detail">
      <div class="main">
        <div class="cont">
          <div class="tab-head">
            <a href="javascript:;" class="active" data-id="2">商品详情</a>
            <a href="javascript:;" data-id="3">商品评价<span>（998+）</span></a>
          </div>
          <div class="tab-pane" style="display: block;">
            <!-- 静态属性 -->
            <div class="attrs">
              <div class="item"><span>商品名称：</span><span>小米L32M5-AZ </span></div>
              <div class="item"><span>商品编号：</span><span>4620979 </span></div>
              <div class="item"><span>商品毛重：</span><span>8.0kg </span></div>
              <div class="item"><span>商品产地：</span><span>中国大陆 </span></div>
              <div class="item"><span>屏幕尺寸：</span><span>32英寸及以下 </span></div>
              <div class="item"><span>能效等级：</span><span>三级能效 </span></div>
              <div class="item"><span>电视类型：</span><span>人工智能 </span></div>
              <div class="item"><span>选购指数：</span><span>6.9-6.0 </span></div>
              <div class="item"><span>观看距离：</span><span>2m以下（≤32英寸）</span></div>
            </div>
            <!-- 详情内容 -->
            <div class="detail">
              <img src="https://yanxuan-item.nosdn.127.net/39d7f2407c90d0442566a719146ee9c1.jpg" alt=""
                data-v-2c43c764=""><img src="https://yanxuan-item.nosdn.127.net/7dfee58e7c6b3996badf368610ed62b1.jpg"
                alt="" data-v-2c43c764=""><img
                src="https://yanxuan-item.nosdn.127.net/d1acff1a29bddd21c2ad337d892a9f7c.jpg" alt=""
                data-v-2c43c764=""><img src="https://yanxuan-item.nosdn.127.net/ac722b04b2014ac337d8db695ee46f0c.jpg"
                alt="" data-v-2c43c764=""><img
                src="https://yanxuan-item.nosdn.127.net/c63e36faa0848ee37c825897f5cec179.jpg" alt=""
                data-v-2c43c764=""><img src="https://yanxuan-item.nosdn.127.net/e0f13dbf14c8a2f07e86bf3df3ca002b.jpg"
                alt="" data-v-2c43c764="">
            </div>
          </div>
          <div class="tab-pane" style="display: none;">
            <div class="goods-tabs">
              <div class="tabs-hd">
                <span>排序：</span>
                <!-- tabs切换按钮 -->
                <ul>
                  <li class="active"><a href="#">默认</a></li>
                  <li><a href="#">最新</a></li>
                  <li><a href="#">最热</a></li>
                </ul>
              </div>
              <div class="tabs-bd">
                <!-- 默认tabs隐藏   切换show类名显示 -->
                <!-- 默认评论模块 -->
                <div class="tabs tabs-default show">
                  <!-- tabs-item 每一个评论列表 -->
                  <div class="tabs-item">
                    <div class="userInfo">
                      <span class="userpic"><img src="./uploads/avatar_1.png" alt=""></span>
                      <span class="username">兔****y</span>
                    </div>
                    <div class="tbs-body">
                      <div class="score">
                        <!-- 切换xingxing 和 xingxing1 可以改变星星样式 -->
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing1"></i>
                        <i class="iconfont icon-xingxing1"></i>
                        <span class="attr">颜色：白色 尺寸：10cm 产地：美国</span>
                      </div>
                      <div class="text">昨天下单，今天中午开锅就试着烧了五花肉，耗时30分钟，一切都刚刚好，比以前的锅烧出来口感汤汁都好多了，且价格实惠！建议购买！</div>
                      <div class="comment-image">
                        <div class="list">
                          <a class="" href="javascript:;">
                            <img src="./uploads/1.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/2.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/3.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/4.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/5.webp" alt="">
                          </a>

                        </div>
                        <!---->
                      </div>
                      <div class="time">
                        <span>2021-04-03 13:20:32</span>
                        <span class="zan"><i class="iconfont icon-dianzan"></i>74</span>
                      </div>
                    </div>
                  </div>
                  <!-- tabs-item 每一个评论列表 -->
                  <div class="tabs-item">
                    <div class="userInfo">
                      <span class="userpic"><img src="./uploads/avatar_1.png" alt=""></span>
                      <span class="username">兔****y</span>
                    </div>
                    <div class="tbs-body">
                      <div class="score">
                        <!-- 切换xingxing 和 xingxing1 可以改变星星样式 -->
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing1"></i>
                        <i class="iconfont icon-xingxing1"></i>
                        <span class="attr">颜色：白色 尺寸：10cm 产地：美国</span>
                      </div>
                      <div class="text">昨天下单，今天中午开锅就试着烧了五花肉，耗时30分钟，一切都刚刚好，比以前的锅烧出来口感汤汁都好多了，且价格实惠！建议购买！</div>
                      <div class="comment-image">
                        <div class="list">
                          <a class="" href="javascript:;">
                            <img src="./uploads/1.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/2.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/3.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/4.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/5.webp" alt="">
                          </a>

                        </div>
                        <!---->
                      </div>
                      <div class="time">
                        <span>2021-04-03 13:20:32</span>
                        <span class="zan"><i class="iconfont icon-dianzan"></i>74</span>
                      </div>
                    </div>
                  </div>
                  <!-- tabs-item 每一个评论列表 -->
                  <div class="tabs-item">
                    <div class="userInfo">
                      <span class="userpic"><img src="./uploads/avatar_1.png" alt=""></span>
                      <span class="username">兔****y</span>
                    </div>
                    <div class="tbs-body">
                      <div class="score">
                        <!-- 切换xingxing 和 xingxing1 可以改变星星样式 -->
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing"></i>
                        <i class="iconfont icon-xingxing1"></i>
                        <i class="iconfont icon-xingxing1"></i>
                        <span class="attr">颜色：白色 尺寸：10cm 产地：美国</span>
                      </div>
                      <div class="text">昨天下单，今天中午开锅就试着烧了五花肉，耗时30分钟，一切都刚刚好，比以前的锅烧出来口感汤汁都好多了，且价格实惠！建议购买！</div>
                      <div class="comment-image">
                        <div class="list">
                          <a class="" href="javascript:;">
                            <img src="./uploads/1.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/2.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/3.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/4.webp" alt="">
                          </a>
                          <a class="" href="javascript:;">
                            <img src="./uploads/5.webp" alt="">
                          </a>

                        </div>
                        <!---->
                      </div>
                      <div class="time">
                        <span>2021-04-03 13:20:32</span>
                        <span class="zan"><i class="iconfont icon-dianzan"></i>74</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 最新评论模块 -->
                <div class="tabs tabs-new"></div>
                <!-- 最热评论模块 -->
                <div class="tabs tabs-hot"></div>
              </div>

              <!-- 翻页在这里 -->
              <div class="pagination">
                <ul>
                  <li>1</li>
                  <li>2</li>
                  <li>3</li>
                  <li>4</li>
                  <li>5</li>
                  <li>6</li>
                  <li>7</li>
                  <li>8</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- 注意事项 -->
        <div class="warn">
          <h3>注意事项</h3>
          <p class="tit">• 购买运费如何收取？ </p>
          <p>单笔订单金额(不含运费)满88元免邮费；不满88元，每单收取10元运费。（港澳台地区需满500元免邮费；不满500元，每单收取30元运费) </p>
          <br>
          <br>
          <p class="tit">• 使用什么快递发货? </p>
          <p>默认使用顺丰快递发货(个别商品使用其他快递） </p>
          <p>配送范围覆盖全国大部分地区(港澳台地区除外）。 </p>
          <br>
          <br>
          <p class="tit">• 如何申请退货? </p>
          <p>1.自收到商品之日起30日内，顾客可申请无忧退货，退款将原路返还，不同的银行处理时间不同，预计1-5个工作日到账； </p>
          <p>2.内裤和食品等特殊商品无质量问题不支持退货； </p>
          <p>3.退货流程： 确认收货-申请退货-客服审核通过-用户寄回商品-仓库签收验货-退款审核-退款完成； </p>
          <p>4.因小兔鲜儿产生的退货，如质量问题，退货邮费由小兔鲜儿承担，退款完成后会以现金券的形式报销。因客户个人原因产生的退货，购买和寄回运费由客户个人承担。</p>
        </div>
      </div>
      <div class="aside">
        <div class="tit">24小时热销榜</div>
        <div class="product">
          <img src="./uploads/fresh_goods_3.jpg" alt="">
          <p class="name">USB Type C数据线</p>
          <p class="desc">快速充电，稳定传输</p>
          <p class="price">¥29</p>
        </div>
        <div class="product">
          <img src="./uploads/fresh_goods_3.jpg" alt="">
          <p class="name">USB Type C数据线</p>
          <p class="desc">快速充电，稳定传输</p>
          <p class="price">¥29</p>
        </div>
        <div class="product">
          <img src="./uploads/fresh_goods_3.jpg" alt="">
          <p class="name">USB Type C数据线</p>
          <p class="desc">快速充电，稳定传输</p>
          <p class="price">¥29</p>
        </div>
        <div class="tit">专题推荐</div>
        <div class="special">
          <img src="./uploads/discuss_goods_1.jpg" alt="">
          <p class="name">一往无前，诞生于崛起</p>
        </div>
        <div class="special">
          <img src="./uploads/discuss_goods_1.jpg" alt="">
          <p class="name">一往无前，诞生于崛起</p>
        </div>
        <div class="special">
          <img src="./uploads/discuss_goods_1.jpg" alt="">
          <p class="name">一往无前，诞生于崛起</p>
        </div>
      </div>
    </div>
  </main>

  <!-- 公共底部 -->
  <footer class="footer">
    <div class="w">
      <div class="slogan">
        <ul>
          <li>
            <h5></h5>
            <p>价格亲民</p>
          </li>
          <li>
            <h5 class="two"></h5>
            <p>物流快捷</p>
          </li>
          <li>
            <h5 class="three"></h5>
            <p>品质新鲜</p>
          </li>
          <li>
            <h5 class="four"></h5>
            <p>售后无忧</p>
          </li>
        </ul>
      </div>
      <div class="service">
        <div class="service-left">
          <dl>
            <dt>购物指南</dt>
            <dd> <a href="#">购物流程</a></dd>
            <dd> <a href="#">支付方式</a></dd>
            <dd> <a href="#">售后规则</a></dd>
          </dl>
          <dl>
            <dt>购物指南</dt>
            <dd> <a href="#">购物流程</a></dd>
            <dd> <a href="#">支付方式</a></dd>
            <dd> <a href="#">售后规则</a></dd>
          </dl>
          <dl>
            <dt>购物指南</dt>
            <dd> <a href="#">购物流程</a></dd>
            <dd> <a href="#">支付方式</a></dd>
            <dd> <a href="#">售后规则</a></dd>
          </dl>
          <dl>
            <dt>服务热线</dt>
            <dd> <a href="#">在线客服 <i class="iconfont icon-customer-service"></i></a></dd>
            <dd> <a href="#">客服电话 400-0000-000</a></dd>
            <dd> <a href="#">工作时间 周一至周日 8:00-18:00</a></dd>
          </dl>
        </div>
        <div class="service-right">
          <ul>
            <li>
              <img src="./images/app.png" alt="">
              <p>微信公众号</p>
            </li>
            <li>
              <img src="./images/app.png" alt="">
              <p>APP下载二维码</p>
            </li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p>
          <a href="#">关于我们</a> |
          <a href="#">联系我们</a> |
          <a href="#">配送与验收</a> |
          <a href="#">商务合作</a> |
          <a href="#">搜索推荐</a> |
          <a href="#">友情链接</a>
        </p>

        <p>CopyRight © 小兔鲜</p>
      </div>
    </div>
  </footer>

  <script>
    // <!--! 节流和收缩模块暂时忽略，不用深入；更稳健的querySelector稍微看一下即可
    (function () {
      'use strict';

      // 可以把 u 工具提取到单独的 js/utils.js 并在页面里复用
      // 简单工具函数
      const u = {
        // 更稳健的 querySelector：验证参数并捕获异常，出错时返回 null
        qs(selector, root = document) {
          try {
            if (typeof selector !== 'string' || !selector.trim()) return null;
            if (!root || typeof root.querySelector !== 'function') return null;
            return root.querySelector(selector);
          } catch (e) {
            return null;
          }
        },
        // requestAnimationFrame 节流 wrapper
        rafThrottle(fn) {
          let scheduled = false;
          return function (...args) {
            if (scheduled) return;
            scheduled = true;
            requestAnimationFrame(() => {
              scheduled = false;
              fn.apply(this, args);
            });
          };
        }
      };

      // Header 收缩模块：使用 rAF 节流，防止频繁重绘
      // 仅通过在 header 上添加/移除类来控制高度，样式与过渡写在 CSS 中，避免频繁的布局重排
      const HeaderShrink = (function () {
        const header = u.qs('.w.header');
        if (!header) return { init() {} };

        // 计算阈值时使用 header 底部位置，但为了防止因为 height 改变导致的抖动，
        // 在收缩/恢复之间加入滞回区间（hysteresis）
        const baseThreshold = header.offsetTop + header.clientHeight;
        const shrinkThreshold = baseThreshold; // 滑动超过此值时收缩
        const expandThreshold = Math.max(0, baseThreshold - 20); // 回到此值以下时恢复（留 20px 的滞回区间）

        function onScroll() {
          const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
          const isSmall = header.classList.contains('header--small');
          if (scrollTop >= shrinkThreshold && !isSmall) {
            header.classList.add('header--small');
          } else if (scrollTop <= expandThreshold && isSmall) {
            header.classList.remove('header--small');
          }
        }

        function init() {
          window.addEventListener('scroll', u.rafThrottle(onScroll), { passive: true });
        }

        return { init };
      })();

      // 图片放大镜 / 切换模块（small / middle / large）
      const ImageZoom = (function () {
        const small = u.qs('.small');
        const middle = u.qs('.middle');
        const large = u.qs('.large');
        const layer = u.qs('.layer');
        if (!small || !middle || !large || !layer) return { init() {} };

        let hideTimer = null;

        // 设置小图列表的激活状态
        function setActiveThumb(li) {
          const prev = small.querySelector('li.active');
          if (prev) prev.classList.remove('active');
          if (li) li.classList.add('active');
        }

        // 小图鼠标悬停事件处理
        function onSmallMouseOver(e) {
          const img = e.target && e.target.tagName === 'IMG' ? e.target : null;
          if (!img) return;
          const li = img.closest('li');
          setActiveThumb(li);
          const src = img.src;
          const midImg = middle.querySelector('img');
          if (midImg) midImg.src = src;
          large.style.backgroundImage = `url(${src})`;
        }

        // 显示大图
        function showLarge() {
          clearTimeout(hideTimer);
          large.style.display = 'block';
          // 同时显示中图上的遮罩层
          if (layer) layer.style.display = 'block';
        }

        // 隐藏大图
        function hideLarge() {
          clearTimeout(hideTimer);
          hideTimer = setTimeout(() => {
            large.style.display = 'none';
            if (layer) layer.style.display = 'none';
          }, 200);
        }

        // <!--! 中图鼠标移动事件处理
        function onMiddleMouseMove(e) {
          const rect = middle.getBoundingClientRect();
          // 考虑 pageY 兼容性，部分浏览器不支持 pageY
          const pageY = e.pageY || (e.clientY + document.documentElement.scrollTop);
          const x = e.pageX - rect.left;
          const y = pageY - rect.top - document.documentElement.scrollTop;

          // 限定区域（与原来保持逻辑，宽高 400）
          if (x < 0 || y < 0 || x > 400 || y > 400) return;

          let mx = 0, my = 0;
          if (x < 100) mx = 0;
          else if (x <= 300) mx = x - 100;
          else mx = 200;

          if (y < 100) my = 0;
          else if (y <= 300) my = y - 100;
          else my = 200;

          layer.style.left = mx + 'px';
          layer.style.top = my + 'px';
          large.style.backgroundPositionX = -2 * mx + 'px';
          large.style.backgroundPositionY = -2 * my + 'px';
        }

        function init() {
          small.addEventListener('mouseover', onSmallMouseOver);
          middle.addEventListener('mouseenter', showLarge);
          middle.addEventListener('mouseleave', hideLarge);
          large.addEventListener('mouseenter', showLarge);
          large.addEventListener('mouseleave', hideLarge);
          middle.addEventListener('mousemove', onMiddleMouseMove);
        }

        return { init };
      })();

      // <!--? 点击切换谁来显示，应该很简单啊，下面乃至另一个，怎么实现那么复杂？
      // 商品详情 / 评价 切换模块（简洁、接近原始实现）
      const Tabs = (function () {
        const head = u.qs('.tab-head');
        const container = u.qs('.main .cont');
        if (!head || !container) return { init() {} };

        function onHeadClick(e) {
          // 支持点击 <a> 内的子元素（如 span），使用 closest
          const a = e.target.closest ? e.target.closest('a') : (e.target.tagName === 'A' ? e.target : null);
          if (!a || !head.contains(a)) return;

          const active = head.querySelector('.active');
          if (active) active.classList.remove('active');
          a.classList.add('active');

          const id = a.dataset.id;
          if (!id) return;

          // 保持原逻辑：显示 id 指向的 nth-child，隐藏另一个
          const other = id == 2 ? 3 : 2;
          const showEl = document.querySelector('.main .cont>div:nth-child(' + id + ')');
          const hideEl = document.querySelector('.main .cont>div:nth-child(' + other + ')');
          if (showEl) showEl.style.display = 'block';
          if (hideEl) hideEl.style.display = 'none';
        }

        function init() { head.addEventListener('click', onHeadClick); }

        return { init };
      })();

      // 属性选择（尺寸、颜色）模块：只在各自容器内找 active，防止全局污染
      const AttrSelectors = (function () {
        function initContainer(selector, matchTag) {
          const root = u.qs(selector);
          if (!root) return;
          root.addEventListener('click', function (e) {
            if (e.target && e.target.tagName === matchTag) {
              const prev = root.querySelector('.active');
              if (prev) prev.classList.remove('active');
              e.target.classList.add('active');
            }
          });
        }

        function init() {
          initContainer('.item #size', 'SPAN');
          initContainer('.item #color', 'IMG');
        }

        return { init };
      })();

      // 初始化所有模块
      HeaderShrink.init();
      ImageZoom.init();
      Tabs.init();
      AttrSelectors.init();

    })();
  </script>
</body>

</html>